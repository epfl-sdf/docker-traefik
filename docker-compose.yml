version: "3.3"

services:
    traefik:
        image: traefik # The official Traefik docker image
        restart: always
        container_name: traefik
        command: --api --docker # Enables the web UI and tells Traefik to listen to docker
        ports:
            - "80:80"     # The HTTP port
            - "443:443"
            - "8080:8080"
        volumes:
            - /var/run/docker.sock:/var/run/docker.sock # So that Traefik can listen to the Docker events
            - $PWD/traefik:/etc/traefik
            - $PWD/.htpasswd:/etc/traefik/.htpasswd
            - "$PWD/log:/var/log/traefik"
        labels:
            - "traefik.enable=true"
            - traefik.frontend.rule:"Host:www.tototutu.ml"
            - "traefik.port=8080"
